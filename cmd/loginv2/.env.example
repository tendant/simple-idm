# Simple IDM LoginV2 Server Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Base URL for the application
BASE_URL=http://localhost:4000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Connection
IDM_PG_HOST=localhost
IDM_PG_PORT=5432
IDM_PG_DATABASE=idm_db
IDM_PG_USER=idm
IDM_PG_PASSWORD=your_password_here

# =============================================================================
# JWT CONFIGURATION
# =============================================================================

# JWT Secret Key (use a strong, random secret in production)
JWT_SECRET=very-secure-jwt-secret

# JWT Token Settings
JWT_ISSUER=simple-idm
JWT_AUDIENCE=simple-idm

# Cookie Settings
COOKIE_HTTP_ONLY=true
COOKIE_SECURE=true

# Token Expiry Durations (ISO 8601 duration format)
ACCESS_TOKEN_EXPIRY=5m
REFRESH_TOKEN_EXPIRY=15m
TEMP_TOKEN_EXPIRY=10m
LOGOUT_TOKEN_EXPIRY=-1m

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Server Settings
EMAIL_HOST=localhost
EMAIL_PORT=1025
EMAIL_USERNAME=noreply@example.com
EMAIL_PASSWORD=your_email_password
EMAIL_FROM=noreply@example.com
EMAIL_TLS=false

# =============================================================================
# TWILIO CONFIGURATION (SMS)
# =============================================================================

# Twilio SMS Settings (optional)
# TWILIO_ACCOUNT_SID=your_twilio_account_sid
# TWILIO_AUTH_TOKEN=your_twilio_auth_token
# TWILIO_FROM=+1234567890

# =============================================================================
# PASSWORD COMPLEXITY CONFIGURATION
# =============================================================================

# Password Requirements
PASSWORD_COMPLEXITY_REQUIRE_DIGIT=true
PASSWORD_COMPLEXITY_REQUIRE_LOWERCASE=true
PASSWORD_COMPLEXITY_REQUIRE_NON_ALPHANUMERIC=true
PASSWORD_COMPLEXITY_REQUIRE_UPPERCASE=true
PASSWORD_COMPLEXITY_REQUIRED_LENGTH=8
PASSWORD_COMPLEXITY_DISALLOW_COMMON_PWDS=true
PASSWORD_COMPLEXITY_MAX_REPEATED_CHARS=3
PASSWORD_COMPLEXITY_HISTORY_CHECK_COUNT=0

# Password Expiration (ISO 8601 duration format)
PASSWORD_COMPLEXITY_EXPIRATION_PERIOD=P100Y
PASSWORD_COMPLEXITY_MIN_PASSWORD_AGE_PERIOD=PT0M

# =============================================================================
# LOGIN CONFIGURATION
# =============================================================================

# Login Security Settings
LOGIN_MAX_FAILED_ATTEMPTS=10000
LOGIN_LOCKOUT_DURATION=PT0M
DEVICE_EXPIRATION_DAYS=P90D

# Registration Settings
LOGIN_REGISTRATION_ENABLED=false
LOGIN_REGISTRATION_DEFAULT_ROLE=readonlyuser

# Magic Link Settings
MAGIC_LINK_TOKEN_EXPIRATION=PT6H

# Phone Verification
PHONE_VERIFICATION_SECRET=secret

# =============================================================================
# OAUTH2 CLIENT CONFIGURATION
# =============================================================================

# OAuth2 Client Secret Encryption Key (32 bytes base64 encoded)
# Generate with: openssl rand -base64 32
OAUTH2_CLIENT_ENCRYPTION_KEY=your_base64_encoded_32_byte_key_here

# =============================================================================
# EXTERNAL PROVIDER CONFIGURATION (OAuth2/OIDC)
# =============================================================================

# Default role for users created via external providers
EXTERNAL_PROVIDER_DEFAULT_ROLE=user

# Google OAuth2
GOOGLE_ENABLED=false
# GOOGLE_CLIENT_ID=your_google_client_id
# GOOGLE_CLIENT_SECRET=your_google_client_secret

# Microsoft OAuth2
MICROSOFT_ENABLED=false
# MICROSOFT_CLIENT_ID=your_microsoft_client_id
# MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret

# GitHub OAuth2
GITHUB_ENABLED=false
# GITHUB_CLIENT_ID=your_github_client_id
# GITHUB_CLIENT_SECRET=your_github_client_secret

# LinkedIn OAuth2
LINKEDIN_ENABLED=false
# LINKEDIN_CLIENT_ID=your_linkedin_client_id
# LINKEDIN_CLIENT_SECRET=your_linkedin_client_secret

# =============================================================================
# NOTES
# =============================================================================

# Configuration Priority (highest to lowest):
# 1. Environment variables
# 2. .env file values
# 3. Built-in defaults

# Duration Format:
# - Use ISO 8601 duration format (e.g., PT5M for 5 minutes, P90D for 90 days)
# - PT prefix for time durations, P prefix for date durations

# Security Notes:
# - Change JWT_SECRET to a strong, random value in production
# - Set COOKIE_SECURE=true when using HTTPS
# - Keep sensitive values like client secrets secure
# - This .env file should be added to .gitignore

# External Provider Setup:
# - Set *_ENABLED=true to enable each provider
# - Obtain client credentials from respective provider consoles
# - Configure redirect URIs in provider settings to match your BASE_URL
